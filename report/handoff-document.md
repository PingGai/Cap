# AI 任务交接文档：Cap 应用桌面版汉化

## 1. 任务目标

核心任务是对 `\Cap\apps\desktop\src\routes` 目录下的 Tauri + SolidStart 应用进行界面文本的汉化。

**关键约束**：
- **手动精确修改**：禁止使用任何形式的自动化脚本进行批量文本替换。必须定位到包含硬编码文本的源文件，并进行精确的、逐行或逐段的 `apply_diff` 修改。
- **用户验证**：用户会亲自构建应用来验证汉化效果。AI 的主要职责是正确地修改文件，而不是确保构建成功。

## 2. 当前状态

- **部分汉化已完成且已验证**：用户已确认对 `apps/desktop/src/routes/(window-chrome)/settings/general.tsx` 的汉化是有效的。
- **大部分汉化未生效**：我之前尝试修改的其他文件（如 `apps/desktop/src/routes/(window-chrome)/new-main/index.tsx` 及其子组件）在用户的构建中并未生效。
- **根本原因分析**：经过与用户的沟通，我们排除了构建缓存问题。结论是，我之前修改的文件可能不是最终渲染UI的正确文件，或者定位的文本不准确。

## 3. 下一步行动计划 (Action Plan)

**核心策略已改变**：放弃主动搜索和猜测。严格遵循“用户提供 -> AI 修改”的模式。

1.  **等待用户输入**: 不要主动搜索文件或文本。等待用户提供下一个需要翻译的界面的**原始英文字符串**。
2.  **精确搜索**: 使用 `search_files` 工具，将用户提供的原始字符串作为精确（非正则）的搜索关键词，在 `apps/desktop/src` 目录下查找包含该文本的文件。
3.  **分析并修改**:
    - 读取搜索到的文件。
    - 分析上下文，确认这是正确的待修改位置。
    - 使用 `apply_diff` 工具，将该处文本精确地翻译为中文。
4.  **更新清单**: 每次成功应用一个修改后，将文件路径和状态更新到 [`report/translation-checklist.md`](./translation-checklist.md) 中，并清楚地标注修改的内容，以便用户验证。
5.  **重复循环**: 回到第 1 步，等待用户的下一个输入。

**禁止操作**：
- **不要尝试执行 `pnpm tauri:build` 或任何其他构建/安装命令。** 用户已明确表示将自行处理构建和验证。
- **不要进行任何全局清理操作**（如删除 `node_modules`, `.turbo` 等）。

请接手的 AI 严格遵循以上行动计划，以用户提供的文本为唯一依据，进行精确、小范围的修改。